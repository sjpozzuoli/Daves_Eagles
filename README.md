# Daves_Eagles
Group 4 Final Project

## Third Segment Rubric
### This Week: "Plug It In"


### Viz, presentation and code progression
<ul>
 
 ![Description information](https://user-images.githubusercontent.com/81929616/133950126-5aa5be7b-57c5-4503-a051-c3a296ab8791.png)
 
 ### This Week: "Plug It In"

*Connect your final database to your model, continue to train your model, and create your dashboard presentation.*

### Machine Learning Model 1 - Unsupervised Clustering with KMeans
Team members submit the working code for their machine learning model, as well as the following:
 
 #### Software:
- Python 3.8.5
- Google Colab
- RStudio: 3.6.2
- PgAdmin4
- Jupyter Notebook

### Connect Database to Machine Learning Model:

![supervised_connect_database](https://user-images.githubusercontent.com/36451701/133947517-3794d5d5-9102-4d35-8fef-b2b6e7ddff51.png)

![pgadmin_data](https://user-images.githubusercontent.com/36451701/133911547-c9cd318b-1659-4897-9530-9b7d6c83166a.png)

![connect_db_1](https://user-images.githubusercontent.com/36451701/133911713-5b7fb47c-b6e2-422c-a91e-73881c316591.png)

### Description of feature engineering and the feature selection, including their decision-making process:
![unsupervised_correlations_matrix](https://user-images.githubusercontent.com/36451701/133945037-8679dd9d-98f0-46fa-b200-06a15ae75318.png)

![unsupervised_outliers](https://user-images.githubusercontent.com/36451701/133944288-f4c4ec9b-7f0f-434a-8746-9a008718c229.png)

![feature_selection](https://user-images.githubusercontent.com/36451701/133911789-b1d49421-bf6a-4041-aadb-798e91f90bfe.png)

![identify_outliers](https://user-images.githubusercontent.com/36451701/133911808-e0f488e2-9217-479b-add1-cf088731a63a.png)


### Description of how data was split into training and testing sets:

![unsupervised_test_train](https://user-images.githubusercontent.com/36451701/133942704-4b105e2f-6b1f-4e71-afbf-ed0e709fc33e.png)

![unsupervised_thedataset](https://user-images.githubusercontent.com/36451701/133945283-1dfe6dc9-7ae6-48a9-858b-581e49dd9308.png)

![unsupervised_optimal_clusters](https://user-images.githubusercontent.com/36451701/133945162-c299c195-24e4-4faf-b064-54de8d361a07.png)

![unsupervised_elbow_method](https://user-images.githubusercontent.com/36451701/133945420-5668dd19-1b34-413f-8619-9a803a44db9c.png)

![unsupervised_training_kmeans](https://user-images.githubusercontent.com/36451701/133946080-0dfb965c-60e6-4d8b-b743-d502ad1b6945.png)

![unsupervised_cluster_matplotlib](https://user-images.githubusercontent.com/36451701/133946352-da0a72f2-f4e0-4891-a38f-cc67e413c892.png)

![unsupervised_city_clusters](https://user-images.githubusercontent.com/36451701/133946854-2ff11da0-fd42-4c43-ad1b-c9b6c857eaa7.png)

### Explanation of model choice, including limitations and benefits:
![unsupervised_insights](https://user-images.githubusercontent.com/36451701/133947617-488362bc-7f12-476c-8d66-ee0d092a68c5.png)


### Machine Learning Model 2 - Supervised Machine Learning Simple Linear Regression to Predict Hotness Rank

### Connect Database to Machine Learning Model:
![supervised_connect_database2](https://user-images.githubusercontent.com/36451701/133947774-b9d9c117-242d-483a-a868-fd6590b009a6.png)

### Description of data preprocessing:
![supervised_data_processing](https://user-images.githubusercontent.com/36451701/133948211-429558bd-6065-4e41-862c-793de498e0d0.png)

### Description of how data was split into training and testing sets:
![supervised_train_test](https://user-images.githubusercontent.com/36451701/133948767-29308282-e2b9-42d4-b822-37b410beba14.png)

### Predicting the Test set results:
![supervised_predict_test](https://user-images.githubusercontent.com/36451701/133948951-e2b7dd79-47a0-474c-aa8a-efb4c4e3aabd.png)

### Visualize Training Set results:
![supervised_visualize_train](https://user-images.githubusercontent.com/36451701/133949367-8867f099-9e59-4455-9de8-c82e65398bea.png)

![supervised_visualize_train_scatter](https://user-images.githubusercontent.com/36451701/133949595-78980a3f-ef4f-497a-9564-df5ecc1f84c5.png)

### Visualize Test Set results:
![supervised_visualize_test_scatter](https://user-images.githubusercontent.com/36451701/133949892-20126f2e-f1e2-48cb-a9ba-7f88b40d07e9.png)

![supervised_visualize_test_scatter2](https://user-images.githubusercontent.com/36451701/133950015-fb5b3305-525c-4d94-a9af-f859bb138570.png)

### Explanation of model choice, including limitations and benefits:
![supervised_model_explanation](https://user-images.githubusercontent.com/36451701/133950165-846547f4-5488-437c-bb20-ed957eb677b2.png)

### Description of current accuracy score:
![supervised_model_accuary](https://user-images.githubusercontent.com/36451701/133950594-98e392ac-50b6-4756-b4d9-a8417555d632.png)

### Supervised Learning Model: Predicting Median Listing Price:
![Supervised Learning 1](https://user-images.githubusercontent.com/81929616/133951866-ea45c9e6-3d3a-45e1-bd78-d02f87e6d129.png)

### Cleaning the Data:
![Supervised Learning 2](https://user-images.githubusercontent.com/81929616/133951894-8bba2a58-c181-4d90-99a4-6c4b9910149e.png)

### Splitting the Data into Training and Test sets:
![Supervised Learning 3](https://user-images.githubusercontent.com/81929616/133951913-7e8fd8fc-445c-46ff-bcb1-5ae622f95ddd.png)

### Visualizing the Results:
![Supervised Learning 4](https://user-images.githubusercontent.com/81929616/133951936-78b25521-d613-4701-bbe8-07313f2c6de9.png)

 
<li>The Presentation itself will be in Tableau (not Google Slides) using the Story feature. </li>
<li>The intro will lead us into the discussion of the Machine Learning model of the project. The majority of this discussion is embeded directly in this Github Third Segment Discussion. </li> 
<li> We will then discuss data joins, data cleaning, use of posgres, Python and SQL.</li> 
<li> We will then go to the interactive tool itself. </li> 
The first encarnation of the tool is this interactive Tableau representation:
This enables users to scrole through Realtor.com's Hotness ranking and discover into which of our machine learning groupings each city falls. 
<img width="1597" alt="Screen Shot 2021-09-19 at 8 11 45 PM" src="https://user-images.githubusercontent.com/14239715/133947521-670b9f46-fb49-4209-b208-60372d6d983d.png">

Secondly, we'll show the HTML/Javascript version of the tool. 
We have one interative version that is working: 
<img width="1023" alt="Screen Shot 2021-09-19 at 7 52 20 PM" src="https://user-images.githubusercontent.com/14239715/133947055-bfff3b38-0848-49bd-955d-4edf87ce5ccb.png">
and one that we're still working on: 
<img width="1517" alt="Screen Shot 2021-09-19 at 7 10 50 PM" src="https://user-images.githubusercontent.com/14239715/133947065-7b72a054-739d-4fbe-bb4c-cd68ed41c7a1.png">
 
Which looked like this in an earlier iteration: 
<img width="1379" alt="Screen Shot 2021-09-19 at 8 04 09 PM" src="https://user-images.githubusercontent.com/14239715/133947302-54a0d817-4c08-41e4-af6e-3847949d8596.png">

But will be chosing one to connect to github pages.
 
 
We will then show further analysis of the select cities. These cities were JUST UNDER the hotest 'high supply high demand' category segmented by our model. To find the 'next hotest city' we did the following analysis. The user can chose the city by the legend and discover the corresponding city selection. The layout for these analysis' is not finished. 
<img width="1519" alt="Screen Shot 2021-09-19 at 9 43 19 PM" src="https://user-images.githubusercontent.com/14239715/133950422-7e4ce3d4-d699-4f0a-b26c-359175fea3d5.png">

 
  
<li>Finally we will show the additional data analysis in Tableau and discusss the limitation of the study and questions for future discussion.</li>
</ul>






## Second Segment Rubric

### Database Iteration
For the base of our project we worked with a dataset from Realtor.com (https://www.kaggle.com/maedemaftouni/real-estate-market-trends?select=RDC_Inventory_Hotness_Metrics_County_History.csv). We cleaned this dataset using Python Pandas to check for duplicates, those indicated to be outliers, and removing columns that are out of scope for the analysis. See Dataset_Exploration_v1.ipynb for additional details. Secondly, we cleaned the Mortgage Rates dataset using a similar process in Python Panda (see Mortgage_Cleaning.ipynb for additional details). Both datasets were manually loaded into pgAdmin for merging with SQL and merged with a left join on the Realtor.com dataset (see SQL_Join_ML_Dataset.txt to review the SQL queries).  This merged dataset serves as the basis for much of the visualization below. 

Our team had also discovered several other datasets that were of interest in our analysis, including information on the cost of living, state and local tax rates and taxes on the median households for both the U.S. and State Households, and happiness index rankings. These datasets were also cleaned via Pandas and loaded in to the SQL Database using a string encoder and tosql Pandas commands (see SQL_String_Encoder.ipynb) and merged the datasets in pgAdmin (see SQL Joins Supplementary.txt)

### Connecting Machine Learning Model 
*You have the data, what do you hope to get out of it?*

#### Resources:
- [dataset](https://raw.githubusercontent.com/sjpozzuoli/Daves_Eagles/main/Data_Main/data.csv)
- [unsupervised_analysis_group_project.ipynb](https://github.com/sjpozzuoli/Daves_Eagles/blob/main/unsupervised_analysis_group_project.ipynb)

#### Software:
- Python 3.8.5
- Google Colab
- RStudio: 3.6.2

#### Step 1: Analyze the input data.

![analyze_input_a](https://user-images.githubusercontent.com/36451701/133001328-1171b0f9-aa1c-4e58-9070-ab112c3881cd.png)

#### Step 2: Analyze the output data.

![analyze_input_b](https://user-images.githubusercontent.com/36451701/133001333-68e5d8a8-047b-487a-89b9-06e503973d00.png)

![analyze_input_c](https://user-images.githubusercontent.com/36451701/133001336-4e841548-7c46-472e-abc1-55c04d01c5e3.png)

![analyze_input_d](https://user-images.githubusercontent.com/36451701/133001337-72167618-7372-4647-b7e0-aa936d7da1dd.png)

#### Step 3: Choose your algorithm - Clustering KMeans

![kmeans_a](https://user-images.githubusercontent.com/36451701/133001547-e4882ca5-9787-452c-9e95-e84e01967ad1.png)

![elbow](https://user-images.githubusercontent.com/36451701/133001549-d7f83f2d-9e5a-423c-aa31-72870c5bf369.png)

![elbow_b](https://user-images.githubusercontent.com/36451701/133333021-03fce2d6-60d4-465b-89e4-e360671ac4ba.png)

![elbow_d](https://user-images.githubusercontent.com/36451701/133479101-fc033efe-7601-4b85-84e6-607b79c56a17.png)

![train](https://user-images.githubusercontent.com/36451701/133001551-cfec94bc-adc4-4e48-bf73-c6fd8ce4f436.png)

#### Step 4: Analyze the results and review accuracy

![clusters_b](https://user-images.githubusercontent.com/36451701/133324106-80c484bf-6f8d-4843-9334-be2eab9b12c2.png)

![clusters_c](https://user-images.githubusercontent.com/36451701/133325865-c7461d0d-5f40-4cd2-9dd9-ad6900d7cb7f.png)

![clusters_d](https://user-images.githubusercontent.com/36451701/133326463-5f6f91d8-efe4-4aa4-bdea-8f40a5a9d104.png)


#### Analysis
- Looking for unexpected things to pop up like structures, clusters and groupings we would have never thought of otherwise. 
- Simplifying the process of buying a home by pinpointing the most important features.
- What are the characteristics of the different clusters/groups created by the machine learning model?

![pivot](https://user-images.githubusercontent.com/36451701/133010657-3b50020c-7cd8-4149-88b4-e108614f0bae.png)

![pivot_b](https://user-images.githubusercontent.com/36451701/133354885-c9984b8f-1c69-4978-8a53-33d34641740e.png)

![heatmap](https://user-images.githubusercontent.com/36451701/133001677-78ff3689-cb4a-441e-9c78-9f38a735fc79.png)

![heatmap_b](https://user-images.githubusercontent.com/36451701/133326825-59d89f18-36a2-4a65-b2df-3afb018b817d.png)

![boxplot](https://user-images.githubusercontent.com/36451701/133001735-e5f8223d-7753-43c0-b82f-fecddf9a0410.png)

![demand](https://user-images.githubusercontent.com/36451701/133001761-bc1c9d89-7b52-4775-a658-8869609b081e.png)

![supply](https://user-images.githubusercontent.com/36451701/133001780-5da55a74-f875-4f01-bb6f-7927d82ff7de.png)

![hotness](https://user-images.githubusercontent.com/36451701/133001799-e6db938b-288e-4570-ac44-fc0f8b2a804c.png)


### Visualization Iteration

We've used visualizations throught out this process to 
  a) understand our data and lay the ground work of our study. 
  b) to get the data sets in motion; test them and make sure that we have all of the infomation we'll need, in a format that is useful 
  c) to start to understand the scope of our inquiry. While there are endless parameters that would be fun to study, understanding the what is in scope for a cohesive project and what is out of scope has been crutial to deliver a comprehensive analysis and 
  d) as a tool for discussion, to make sure that we're understanding one another and speaking the same language. 


While working in Tableau to quickly see the data and understand the potential of our analysis, we're working on a parallel track in Javascript as that would be our aspirational delivery tool. 

The screen shots below show the evolution of our data visualization work... from sketch to code. 

Below is the fifth Tableau iteration showing the choice to show a limited number of specific cities to analyse. We have crossreferenced our own data sets to the city choices from the US News and World report list of '150 Best Places to Live'. In our finally analysis, we will chose our own top cities rather than the US News and World report's list with regards to the results of our Machine Learning model. 
<img width="1393" alt="Screen Shot 2021-09-06 at 3 54 51 PM" src="https://user-images.githubusercontent.com/14239715/132949550-79c28f92-8057-454f-9551-9e7179c16909.png">

Below is the integration of the Machine Learning model build by the team. We are now integrating the learnings of the model with the prior viz sketchs to hone in on a discrete and specific story. 
<img width="1412" alt="Screen Shot 2021-09-10 at 7 09 47 PM" src="https://user-images.githubusercontent.com/14239715/132949555-5e477900-7ece-47e5-bf4e-7d2a1aef6895.png">

Finally, the code in progress of a potential Javascript/HTML site for potential final delivery.
<img width="1686" alt="Screen Shot 2021-09-10 at 8 14 53 PM" src="https://user-images.githubusercontent.com/14239715/132949573-676407f2-2da1-4840-b807-5fd747c9e60f.png">


___________________________________________________________________________________________________________________________________________________________________________________
## First Segment Rubric

### A) Presentation

1. Selected topic
- We chose to examine historical real estate and city data to predict the next city that will see a real estate "boom"
2. Reason why the topic was selected
- The topic was selected because we thought it was a relevant piece of information in the current age, with many people moving out of big cities and to the "suburbs". 
3. Description of their source of data
- We have begun to source data from multiple places like Zillow and the newly reprted Census data to build a picture of the historical information about these cities. From there we will attempt to determine which factors are most important when implementing the unsupervised machine learning aspect of the project.
4. Questions we hope to answer with the data
- We hope to answer the question of which city will see an increase in real estate prices due to an influx of new residents. We will also attempt to determine which cities would be ideal for investing in real estate prior to this rush.

#### In order to communicate for this project, we have used class time, office hours, a slack channel with all members and video chats outside of class time in order to coordinate roles and let others know when data was being uploaded to branches. 

### B) Github Repository - (Steve)
Main Branch
  - Readme
  - Individual Branches (Lucy, Nate, Andrew, Steve, David)

### C) Machine Learning Model - (David, Andrew, Nat, Lucy, Steve)
Present a provisional machine learning model:
  - Takes in data from the provisional database
  - Output labels for input data

Main Objective/Problem/What are we trying to predict? 
- Predicing housing sale prices
- Does something(feature) affect housing prices in a certain location?

What model are we going to use?
- Unsupervised ML Model
- Binary classification or clustering?

How are you training your model? - 

How does this model work? - 

#### Datasets/Features for model (Lucy, Andrew, Nat, David, Steve)
- Inventory by month - inventory_by_month.csv
- Median sale price by city - median_sales_prices.csv
- Median days to pending by city - median_days_pending.csv
- Zillow Rankings - bedrooms_ready.csv
- Tax Rates - effective_tax_rate_2021.xlsx
- Cost of Living - advisorsmith_cost_of_living_index.csv
- Happiest Cities - happiest_cities.xlsx
- Mortgage Rates (Freddie Mac 15-yr fixed) - mortgage_long.csv

![Proof_of_Concept_Screenshot](https://user-images.githubusercontent.com/81929616/131272996-e258b6d8-f039-42c7-93a7-017b11bbf6c1.PNG)

### D) Database Ingestion - (Nat)
Present a provisional db that stands in for the final db that accomplishes the following:
  - Sample data that mimics the expected final db structure or scheme
  - Draft machine learning model is connected to the provisional db

![ERD_v1](https://user-images.githubusercontent.com/81929616/131272834-a278bad3-973c-4ead-9ce7-e6030b3d397d.png)


### Join Methodology
#### Starting with the Zillow Inventory by Month table as the 'base', drop the first two columns - "RegionID" and "SizeRank" as these don't add useful indexing information and could potentially confuse the model.
#### The next step is to add the final columns from Median_Days_Pending and Median_Sales_Prices as columns to the joined table - these tables have matching structures so additional manipulation is minimal. 
#### To add the effective tax data, quickly translated the "State" column of Effective_Tax_2021 to the State acronyms. Using a quick Index/Match function, we can map the tax rates onto the cities. This could also be accomplished grouping on larger datasets. 


#### To add the Happiest_Cities data, we can map the RegionName column to the City column using Index/Match.

#### Similar methodology was used to add the population data, spread across the 200 Most Populated Cities and Population Change datasets. 


main
